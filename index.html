<!DOCTYPE html>
<html lang="no">
<head>
	<meta charset="UTF-8">
	<title>Clash Royale stats</title>
	<link rel="stylesheet" href="styles.css">
</head>
<body onload="testingAPI()">
	<header class="page-top">
		<h1>Clash Royale stats</h1>
		
		<nav class="main-nav">
			<ul>
				<li><a href="index.html">Forsiden</a></li>
				<li><a href="side2.html">Side 2</a></li>
			</ul>
		</nav>
	</header>

	<main class="content">
		<div id="clashDataContainer"></div>
	</main>

	<footer class="page-footer">
		
	</footer>

<script>
	function testingAPI(){
	    var key = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTc4NywiaWRlbiI6IjQwMjc1Nzc0Mjc0NzQ1MT\
M5MiIsIm1kIjp7fSwidHMiOjE1Mzg2NjQ3OTQ2Mjd9.0JLa2j04z96C3iwkDcPVO_PP6G3jnyFJ_RQ7OVzQmow";
	    var url = "https://api.royaleapi.com/player/JYG8VPL";
	    
	    var clashDataContainer = document.getElementById("clashDataContainer");
	    var clashData = JSON.parse(httpGet(url, key));

	    var clashMyName = "<p>Navn: <strong>" + clashData.name + "</strong></p>";
	    var clashMyTrophies = "<p>Trofeer: <strong>" + clashData.trophies + "</strong></p>";

	    var currentDeckCount = clashData.currentDeck.length;
	    var currentDeckString = "<table class='deck-table'><thead><tr><th>Avatar</th><th>Navn</th><th class='level'>Level</th></tr>";
	    for (i = 0; i < currentDeckCount; i++) {
    		currentDeckString +=
    			"<tr>" +
    				"<td>" +
    					"<img class='icon' src='" + clashData.currentDeck[i].icon + "' />" +
    				"</td>" +
	    			"<td>" +
	    				clashData.currentDeck[i].name +
					"</td><td class='level'>" +
						clashData.currentDeck[i].level +
					"</td>" +
				"</tr>";
    	}
    	currentDeckString += "</tr>";

	    clashDataContainer.innerHTML =
	    	clashMyName +
	    	clashMyTrophies +
	    	currentDeckString;
	}

	function httpGet(url,key){
	    var xmlHttp = new XMLHttpRequest();
	    xmlHttp.open( "GET", url, false );
	    xmlHttp.setRequestHeader("auth",key);
	    xmlHttp.send(null);
	    return xmlHttp.responseText;
	}
</script>
</body>
</html>